# 《PhotoWatermarkGUI》产品需求文档（PRD）

## 1. 文档信息

- **版本号：** v0.1
- **更新时间：** 2025-10-05
- **撰写人：** 项目团队
- **涉及迭代：** V1 首发版本（基础功能优先）

## 2. 背景与目标

随着自媒体和电商行业的快速发展，图片内容被广泛传播，如何高效地批量添加水印并保持图片质量成为痛点。本项目旨在提供一个跨平台桌面端图形界面工具，让个人和小型团队能够快速为图片批量添加文字或图像水印，从而保护版权或品牌形象。

### 成功指标

- 用户能够在 3 分钟内完成首张含水印图片的导出。
- 单次批量处理不少于 100 张图片且不中断。
- 用户满意度调查中，基础功能满意度 ≥ 80%。

## 3. 用户画像

| 角色 | 场景 | 需求痛点 |
| --- | --- | --- |
| 自媒体运营者 | 为文章或视频封面批量添加品牌水印 | 操作简单、批量处理、保持图像质量 |
| 图像后期设计师 | 快速导出不同尺寸和样式的水印图 | 灵活的水印位置、透明度、模板复用 |
| 电商店主 | 为商品图统一添加 Logo 或促销文字 | 批量导入导出、避免覆盖原图、模板记忆 |

## 4. 用户旅程

1. 打开应用，系统自动加载上一次使用的设置或默认模板。
2. 通过拖拽或文件选择器导入待处理的图片集合。
3. 在图片列表中选择示例图片，预览窗口实时展示水印效果。
4. 配置文本水印相关参数（内容、透明度、位置等）。
5. 定义导出路径及命名规则，执行批量导出。
6. 若满意，保存当前设置为模板，以便后续复用。

## 5. 范围界定

- **范围内：** Windows/macOS 桌面端 GUI，文字水印核心能力，PNG/JPEG 导出逻辑，模板保存与加载。
- **范围外（后续考虑）：** 命令行批处理、在线版服务、视频水印、AI 智能布局等。

## 6. 功能需求

> 优先级说明：P0=必须、P1=应该（重要）、P2=可选高级功能。V1 以 P0 为上线门槛，P1 视工期安排，P2 留作高级能力。

### 6.1 文件处理

| 编号 | 描述 | 细节 | 优先级 |
| --- | --- | --- | --- |
| FP-01 | 导入单张图片 | 支持拖拽和文件选择器两种方式 | P0 |
| FP-02 | 批量导入图片 | 支持多选文件、整文件夹导入；导入后展示缩略图+文件名列表，可切换预览 | P0 |
| FP-03 | 支持格式（输入） | 必须兼容 JPEG、PNG；强烈建议支持 BMP、TIFF；PNG 需保留透明通道 | P0 |
| FP-04 | 支持格式（输出） | 导出目标格式可选 JPEG 或 PNG | P0 |
| FP-05 | 输出文件夹选择 | 用户需显式设置输出目录，默认禁止与原目录相同以避免覆盖 | P0 |
| FP-06 | 导出命名规则 | 提供三种模式：保持原名、添加自定义前缀、添加自定义后缀 | P0 |
| FP-07 | JPEG 质量调节 | 提供 0-100 的压缩率滑块 | P2 |
| FP-08 | 导出尺寸调整 | 支持按宽度、高度或百分比缩放 | P2 |

### 6.2 水印类型

| 编号 | 描述 | 细节 | 优先级 |
| --- | --- | --- | --- |
| WM-01 | 文本水印内容 | 可输入任意文本，支持多行 | P0 |
| WM-02 | 文本透明度 | 支持 0-100% 调节 | P0 |
| WM-03 | 文本字体与样式 | 可选择系统字体、字号、粗体、斜体 | P2 |
| WM-04 | 文本颜色 | 提供调色板或拾色器 | P2 |
| WM-05 | 文本阴影/描边 | 增强可读性 | P2 |
| WM-06 | 图片水印 | 从本地选择图片（含透明 PNG）；支持缩放与透明度调节 | P2 |

### 6.3 水印布局与交互

| 编号 | 描述 | 细节 | 优先级 |
| --- | --- | --- | --- |
| WL-01 | 实时预览 | 任一参数调整后预览区即时刷新；支持从列表切换预览图片 | P0 |
| WL-02 | 预设位置 | 提供九宫格按钮快捷定位（四角、四边中点、中心） | P0 |
| WL-03 | 手动拖拽 | 预览区可直接拖拽水印至任意位置 | P0 |
| WL-04 | 水印旋转 | 通过滑块或数值输入设置任意角度 | P2 |

### 6.4 配置管理

| 编号 | 描述 | 细节 | 优先级 |
| --- | --- | --- | --- |
| CM-01 | 模板保存 | 将当前全部水印参数保存为模板 | P0 |
| CM-02 | 模板管理 | 可查看、重命名、删除模板 | P1 |
| CM-03 | 自动加载 | 启动时自动加载上一次的设置或选定默认模板 | P1 |

## 7. 非功能需求

- **性能：** 单张 20MB 图片处理时间 ≤ 2 秒；批量 100 张图片总处理时间 ≤ 4 分钟（在主流 PC 上）。
- **兼容：** 兼容 Windows 10+、macOS 12+；后续视反馈扩展。
- **稳定性：** 导出失败需给出错误提示并允许重试；程序异常退出时，设置不应丢失。
- **可用性：** UI 需支持深色/浅色主题（P2），文本与背景对比度符合无障碍标准。

## 8. 交互与界面草案

- 主界面区域划分：左侧图片列表、右侧预览、右下角导出设置、右上角水印参数面板。
- 导入交互：支持拖拽到列表区域或点击“导入”按钮。
- 实况预览：预览画布支持缩放查看，水印位置调整直接在画布上操作。
- 模板下拉：顶部区域提供模板选择，下拉中可管理模板。

## 9. 数据与存储

- 本地配置：使用 JSON/YAML 等文本格式本地持久化模板，位置默认在用户文档目录下的应用数据文件夹。
- 缓存：预览缩略图可缓存至临时目录，加速列表展示。
- 安全性：不涉及网络传输；导入/导出操作遵守系统权限限制。

## 10. 外部依赖与技术选型建议

- 图像处理库：建议优先评估 ImageMagick、Pillow（Python）、Skia（跨平台）等成熟方案。
- GUI 框架：可选 PyQt / Qt for Python、Electron、Avalonia（C#）等，依据团队技术栈决定。
- 字体管理：调用系统 API 获取可用字体列表（如 Qt QFontDatabase）。

## 11. 项目里程碑（建议）

1. **M1 - 核心流程（P0）**：完成导入、预览、文字水印、九宫定位、导出命名、模板保存。
2. **M2 - 模板增强（P1）**：上线模板管理和自动加载；优化批量导出表现。
3. **M3 - 高级体验（P2）**：实现图片水印、字体/颜色选择、旋转、JPEG 质量、尺寸调整等。

## 12. 风险与对策

| 风险 | 影响 | 应对策略 |
| --- | --- | --- |
| 大图批处理耗时过长 | 用户体验差 | 预处理缩略图、异步批处理、进度反馈 |
| 多平台兼容性问题 | 功能异常或崩溃 | 提前定义目标平台，建立自动化回归测试 |
| 字体缺失导致显示异常 | 水印样式不稳定 | 提供字体缺省策略 + 提示用户安装字体 |

## 13. 开放问题

1. 是否需要支持多语言界面？
2. 导出时是否需要支持保留 EXIF 等元信息？
3. 模板是否需要备份/导入导出功能？

---
本 PRD 将随着需求澄清和用户反馈持续迭代更新。
